{
  "version": 1,
  "type": "doc",
  "content": [
    {
      "type": "bodiedExtension",
      "attrs": {
        "extensionType": "com.atlassian.confluence.macro.core",
        "extensionKey": "details",
        "parameters": {
          "macroParams": {
            "hidden": {
              "value": "true"
            }
          },
          "macroMetadata": {
            "schemaVersion": {
              "value": "1"
            },
            "title": "Page Properties"
          }
        }
      },
      "content": [
        {
          "type": "table",
          "attrs": {
            "isNumberColumnEnabled": false,
            "layout": "default"
          },
          "content": [
            {
              "type": "tableRow",
              "content": [
                {
                  "type": "tableHeader",
                  "attrs": {
                    "colspan": 1,
                    "background": "#f4f5f7",
                    "rowspan": 1
                  },
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "text": "Schema Name",
                          "type": "text",
                          "marks": [
                            {
                              "type": "strong"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "tableCell",
                  "attrs": {
                    "colspan": 1,
                    "rowspan": 1
                  },
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "text": "SBMR",
                          "type": "text"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "tableRow",
              "content": [
                {
                  "type": "tableHeader",
                  "attrs": {
                    "colspan": 1,
                    "background": "#f4f5f7",
                    "rowspan": 1
                  },
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "text": "Stored Procedure Name",
                          "type": "text",
                          "marks": [
                            {
                              "type": "strong"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "tableCell",
                  "attrs": {
                    "colspan": 1,
                    "rowspan": 1
                  },
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "text": "usp_SBMR_ProcessAccountWithUnassignAgencyFacility",
                          "type": "text"
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "tableRow",
              "content": [
                {
                  "type": "tableHeader",
                  "attrs": {
                    "colspan": 1,
                    "background": "#f4f5f7",
                    "rowspan": 1
                  },
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "text": "Complexity Level",
                          "type": "text",
                          "marks": [
                            {
                              "type": "strong"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "tableCell",
                  "attrs": {
                    "colspan": 1,
                    "rowspan": 1
                  },
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "text": "Medium",
                          "type": "text"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "heading",
      "attrs": {
        "level": 1
      },
      "content": [
        {
          "type": "text",
          "text": "1. Overview"
        }
      ]
    },
    {
      "type": "paragraph",
      "content": [
        {
          "type": "text",
          "text": "The stored procedure "
        },
        {
          "type": "text",
          "text": "usp_SBMR_ProcessAccountWithUnassignAgencyFacility",
          "marks": [
            {
              "type": "code"
            }
          ]
        },
        {
          "type": "text",
          "text": " is designed to process accounts by mapping them to SBMR (presumably a system or module related to billing or account management) and handling unassigned accounts. It accepts two XML inputs: one for mapping existing accounts to SBMR records and another for creating new SBMR records for unassigned accounts. The procedure updates the "
        },
        {
          "type": "text",
          "text": "Billing.Account",
          "marks": [
            {
              "type": "code"
            }
          ]
        },
        {
          "type": "text",
          "text": " table with agency and facility information and inserts records into the "
        },
        {
          "type": "text",
          "text": "SBMR.SBMRAccount",
          "marks": [
            {
              "type": "code"
            }
          ]
        },
        {
          "type": "text",
          "text": " table. The section for creating new SBMR records is commented out, indicating it is not currently active."
        }
      ]
    },
    {
      "type": "heading",
      "attrs": {
        "level": 1
      },
      "content": [
        {
          "type": "text",
          "text": "2. Complexity Level: Medium"
        }
      ]
    },
    {
      "type": "paragraph",
      "content": [
        {
          "type": "text",
          "text": "The procedure involves XML parsing, data manipulation, and conditional logic, which adds to its complexity. The use of XML handling functions and the need to manage multiple table updates and inserts contribute to a medium complexity level."
        }
      ]
    },
    {
      "type": "heading",
      "attrs": {
        "level": 1
      },
      "content": [
        {
          "type": "text",
          "text": "3. Input Parameters"
        }
      ]
    },
    {
      "type": "bulletList",
      "content": [
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "@xmlSBMRMapping as varchar(8000)",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": This parameter contains XML data that maps existing unassigned accounts to existing SBMR records. The XML format includes "
                },
                {
                  "type": "text",
                  "text": "SBMRHeaderSeqid",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "text",
                  "text": "AccountSeqid",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " elements."
                }
              ]
            }
          ]
        },
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "@xmlNewSBMR as varchar(8000)",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": This parameter contains XML data for unassigned accounts that require new SBMR records. The XML format includes "
                },
                {
                  "type": "text",
                  "text": "AccountSeqid",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " elements."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "heading",
      "attrs": {
        "level": 1
      },
      "content": [
        {
          "type": "text",
          "text": "4. Business Logic and Workflow"
        }
      ]
    },
    {
      "type": "orderedList",
      "content": [
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "XML Preparation and Parsing",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": "
                }
              ]
            },
            {
              "type": "bulletList",
              "content": [
                {
                  "type": "listItem",
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "type": "text",
                          "text": "The procedure begins by declaring handles for XML documents and table variables to store parsed data."
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "listItem",
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "type": "text",
                          "text": "It uses "
                        },
                        {
                          "type": "text",
                          "text": "sp_xml_preparedocument",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": " to parse the XML inputs and "
                        },
                        {
                          "type": "text",
                          "text": "OPENXML",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": " to extract data into table variables "
                        },
                        {
                          "type": "text",
                          "text": "@tblSBMRMapping",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": " and "
                        },
                        {
                          "type": "text",
                          "text": "@tblNewSBMR",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": "."
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "Mapping SBMR to Account",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ":"
                }
              ]
            },
            {
              "type": "bulletList",
              "content": [
                {
                  "type": "listItem",
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "type": "text",
                          "text": "Updates the "
                        },
                        {
                          "type": "text",
                          "text": "Billing.Account",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": " table by setting "
                        },
                        {
                          "type": "text",
                          "text": "AgencyAccount",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": " and "
                        },
                        {
                          "type": "text",
                          "text": "FacilityAccount",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": " fields based on the mappings provided in "
                        },
                        {
                          "type": "text",
                          "text": "@tblSBMRMapping",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": "."
                        }
                      ]
                    }
                  ]
                },
                {
                  "type": "listItem",
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "type": "text",
                          "text": "Inserts records into the "
                        },
                        {
                          "type": "text",
                          "text": "SBMR.SBMRAccount",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": " table for accounts that do not already have an entry for the given "
                        },
                        {
                          "type": "text",
                          "text": "SBMRHeaderSeqid",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": "."
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "Creating New SBMR Records",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ":"
                }
              ]
            },
            {
              "type": "bulletList",
              "content": [
                {
                  "type": "listItem",
                  "content": [
                    {
                      "type": "paragraph",
                      "content": [
                        {
                          "type": "text",
                          "text": "The logic for creating new SBMR records is commented out, indicating that this functionality is not currently implemented. The commented section suggests generating a new SBMR reference number and inserting records into the "
                        },
                        {
                          "type": "text",
                          "text": "SBMR.SBMRHeader",
                          "marks": [
                            {
                              "type": "code"
                            }
                          ]
                        },
                        {
                          "type": "text",
                          "text": " table."
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "heading",
      "attrs": {
        "level": 1
      },
      "content": [
        {
          "type": "text",
          "text": "5. Performance Considerations"
        }
      ]
    },
    {
      "type": "bulletList",
      "content": [
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "XML Parsing Overhead",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": The use of "
                },
                {
                  "type": "text",
                  "text": "sp_xml_preparedocument",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "text",
                  "text": "OPENXML",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " can be resource-intensive, especially with large XML inputs. Consider using the "
                },
                {
                  "type": "text",
                  "text": "xml",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " data type for better performance and scalability."
                }
              ]
            }
          ]
        },
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "Table Variable Usage",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": Table variables are used to store parsed XML data. While suitable for small datasets, they may not perform well with larger datasets compared to temporary tables."
                }
              ]
            }
          ]
        },
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "Indexing",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": Ensure that the "
                },
                {
                  "type": "text",
                  "text": "Billing.Account",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "text",
                  "text": "SBMR.SBMRAccount",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " tables are properly indexed on "
                },
                {
                  "type": "text",
                  "text": "AccountSeqid",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " and "
                },
                {
                  "type": "text",
                  "text": "SBMRHeaderSeqid",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " to optimize join and insert operations."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "heading",
      "attrs": {
        "level": 1
      },
      "content": [
        {
          "type": "text",
          "text": "6. Potential Issues or Risks"
        }
      ]
    },
    {
      "type": "bulletList",
      "content": [
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "XML Size Limitation",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": The input parameters are defined as "
                },
                {
                  "type": "text",
                  "text": "varchar(8000)",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ", which limits the size of XML data that can be processed. Consider using "
                },
                {
                  "type": "text",
                  "text": "nvarchar(max)",
                  "marks": [
                    {
                      "type": "code"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": " for larger XML inputs."
                }
              ]
            }
          ]
        },
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "Concurrency and Locking",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": The procedure updates and inserts into multiple tables, which could lead to locking issues in a high-concurrency environment. Consider transaction management and isolation levels to mitigate this risk."
                }
              ]
            }
          ]
        },
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "Commented Code",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": The commented-out section for creating new SBMR records suggests incomplete functionality. Ensure that any future implementation is thoroughly tested and integrated."
                }
              ]
            }
          ]
        },
        {
          "type": "listItem",
          "content": [
            {
              "type": "paragraph",
              "content": [
                {
                  "type": "text",
                  "text": "Error Handling",
                  "marks": [
                    {
                      "type": "strong"
                    }
                  ]
                },
                {
                  "type": "text",
                  "text": ": The procedure lacks explicit error handling. Consider adding try-catch blocks to manage exceptions and ensure graceful failure."
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "paragraph",
      "content": [
        {
          "type": "text",
          "text": "By addressing these considerations and potential issues, the stored procedure can be optimized for better performance and reliability."
        }
      ]
    },
    {
      "type": "heading",
      "attrs": {
        "level": 1
      },
      "content": [
        {
          "type": "text",
          "text": "7. Stored Procedure Definition"
        }
      ]
    },
    {
      "type": "codeBlock",
      "attrs": {
        "language": "sql"
      },
      "content": [
        {
          "type": "text",
          "text": "-- =============================================\n-- Author:\t\tDerek Ho\r\n-- Create date: 2008 April 2\r\n-- Modified date: 2008 April 21\r\n-- Description:\tBatch process accounts with unassign agency and facility\r\n/*\t\t\t\r\n\tAccept two sets of XML data\r\n\t1) SBMR to account mapping. Containts mapping connect existing unassigned account with existing SBMR.\r\n\t\tXML must in the following format:\r\n\t\t<mappings>\r\n\t\t\t<SBMRAccount>\r\n\t\t\t\t<SBMRHeaderSeqid>[int]</SBMRHeaderSeqid><\r\n\t\t\t\tAccountSeqid>[int]</AccountSeqid>\r\n\t\t\t</SBMRAccount>\r\n\t\t</mappings>\r\n\t2) New SBMR - containst unassigned account seq id required to create new SBMR record\r\n\t\tXML must in the following format:\r\n\t\t<newSBMRs>\r\n\t\t\t<newSBMR>\r\n\t\t\t\t<AccountSeqid>[int]</AccountSeqid>\r\n\t\t\t</newSBMR>\r\n\t\t</newSBMRs>\r\n*/\r\n\r\n-- =============================================\r\nCREATE PROCEDURE [SBMR].[usp_SBMR_ProcessAccountWithUnassignAgencyFacility]\r\n    @xmlSBMRMapping as varchar(8000) = '',\r\n\t@xmlNewSBMR as varchar(8000)= ''\r\nAS\r\nBEGIN\r\n\t\r\n\t\t\r\n\t/* prepare xml documents */\r\n\t\r\n\tdeclare @xmlSBMRMapping_hndl as int\r\n\tdeclare @xmlNewSBMR_hndl as int\r\n\r\n\t/*\r\n\t\tuse table variable data to store xml data. remove xml document immediately after table is filled with data\r\n\t*/\t\r\n\tdeclare @tblSBMRMapping table\r\n\t(\r\n\t\tSBMRHeaderSeqid int,\r\n\t\tAccountSeqid int\r\n\t)\r\n\r\n\tdeclare @tblNewSBMR table\r\n\t(\r\n\t\tAccountSeqid int\r\n\t)\r\n\t\r\n\texec sp_xml_preparedocument @xmlSBMRMapping_hndl OUTPUT, @xmlSBMRMapping\r\n\t\r\n\tinsert into @tblSBMRMapping (SBMRHeaderSeqid, AccountSeqid)\r\n\t\tselect SBMRHeaderSeqid, AccountSeqid  from openxml(@xmlSBMRMapping_hndl, 'mappings/SBMRAccount')\r\n\t\t\twith \r\n\t\t\t(\r\n\t\t\t\tSBMRHeaderSeqid int 'SBMRHeaderSeqid',\r\n\t\t\t\tAccountSeqid int 'AccountSeqid'\r\n\t\t\t)\r\n\r\n\texec sp_xml_removedocument @xmlSBMRMapping_hndl\r\n\r\n\t\r\n\texec sp_xml_preparedocument @xmlNewSBMR_hndl OUTPUT, @xmlNewSBMR\r\n\t\r\n\tinsert into @tblNewSBMR (AccountSeqid)\r\n\t\tselect AccountSeqid from openxml(@xmlNewSBMR_hndl, 'newSBMRs/newSBMR')\r\n\t\t\t\twith \r\n\t\t\t\t(\r\n\t\t\t\t\tAccountSeqid int 'AccountSeqid'\r\n\t\t\t\t)\r\n\r\n\texec sp_xml_removedocument @xmlNewSBMR_hndl\r\n\r\n\t/*\r\n\t\t============= Map SBMR to Account ================\r\n\t\tAccount table gets facility, agency\r\n\t\tSBMR get account number, account effect date \r\n\t*/\r\n\t\r\n\t/* update account table */\r\n\tupdate\r\n\ta \r\n\tset a.AgencyAccount = h.AgencyDivisionSeqid,\r\n\t\ta.FacilityAccount = h.FacilitySeqid\r\n\tfrom \r\n\tBilling.Account as a\r\n\tinner join \r\n\t@tblSBMRMapping as m\r\n\ton a.AccountSeqid = m.AccountSeqid\r\n\tinner join SBMR.SBMRHeader as h\r\n\tON m.SBMRHeaderSeqid = h.SBMRHeaderSeqid \r\n\twhere a.AccountSeqid = m.AccountSeqid\r\n\t\r\n\t/* update SBMRHeader table */\r\n\tINSERT INTO SBMR.SBMRAccount\r\n\t(\r\n\t\tOriginalAccountNumber,\r\n\t\tCurrentAccountNumber,\r\n\t\tSBMRHeaderSeqid,\r\n\t\tAuthenticatedUserID\r\n\t)\r\n\tSELECT NULL, a.CurrentAccountNumber, m.SBMRHeaderSeqid, 1\r\n\tFROM Billing.Account as a\r\n\tinner join \r\n\t@tblSBMRMapping as m\r\n\ton a.AccountSeqid = m.AccountSeqid\r\n\tWHERE a.CurrentAccountNumber NOT IN \r\n\t(\r\n\t\tSELECT sa.CurrentAccountNumber \r\n\t\tFROM SBMR.SBMRAccount as sa\r\n\t\tWHERE sa.SBMRHeaderSeqid = m.SBMRHeaderSeqid\r\n\t)\r\n\t\r\n\t/*\r\n\t\t================ Create SBMR for unassigned account ========== \r\n\t*/\r\n\t\r\n\t/* Following is commented out. SBMR must be created first */\r\n\t\r\n\t/*\r\n\t  declare @latestSBMRNumber int \r\n\t  declare @yymm varchar(4)\r\n\t  declare @firstBillingPeriod varchar(6)\r\n      exec @latestSBMRNumber = usp_SBMR_GetLastSBMRSeqNumber\r\n\r\n\t  set @yymm  = (select substring(BillingPeriod,3,4) FROM ApplicationTimeFrame WHERE (CurrentProcessingPeriod = 'Y'))\r\n\r\n      set @firstBillingPeriod = '20' + @yymm\r\n      -- SBMR Reference number must be in this format yymm-xxx. xxx is system generated sequence number. yy is the year. mm is the month.\r\n\t  \r\n      insert into SBMR.SBMRHeader \r\n      (\r\n            [SbmrReferenceNumber],\r\n            [AccountNumber],\r\n            [FacilitySeqid],\r\n            [AgencyDivisionSeqid],\r\n            [EnergySource],\r\n            [DeliveryUtilityCompanySeqid],\r\n            [SalesType],\r\n            [FirstBillingPeriod]\r\n      )\r\n      select \r\n            (\r\n                  @yymm +\r\n                  REPLICATE('0', 3 - DATALENGTH(cast(((Row_Number() over(order by AccountSeqid)) + @latestSBMRNumber) as varchar))) + \r\n                  cast(((Row_Number() over(order by AccountSeqid)) + @latestSBMRNumber) as varchar)) \r\n                 AS 'SBMRReferenceNumber', \r\n            a.currentAccountNumber, \r\n            a.FacilityAccount, \r\n            a.AgencyAccount,\r\n            EnergySource,\r\n            utilityAccountProvider,\r\n            SalesType,\r\n            @firstBillingPeriod\r\n            from Billing.account as a \r\n\t\t\twhere a.AccountSeqid in (\r\n\t\t\t\tselect AccountSeqid from @tblNewSBMR\r\n\t\t\t)\r\n            order by AccountSeqid\r\n            \r\n  */\r\nEND"
        }
      ]
    }
  ]
}